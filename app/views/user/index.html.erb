<%= render '/shared/header' %>
<div class="container2">
  <% if flash[:error] %>
    <div class="alert alert-danger" role="alert">
      <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
      <span class="sr-only">Error:</span>
      <%= flash[:error] %>
    </div>
  <% end %>
  <% if flash[:notice] %>
    <div class="alert alert-success" role="alert">
      <%= flash[:notice] %>
    </div>
  <% end %>
  <% if flash[:alert] %>
    <div class="alert alert-warning" role="alert">
      <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
      <span class="sr-only">Attention:</span>
      <%= flash[:alert] %>
    </div>
  <% end %>

      
 <div class="col-md-12">

  <div class="container2">
    <%= image_tag(@user.profile_image.url(:thumb), width: '100', border: '0', class: 'img-circle') if !@user.profile_image.nil? %>
    <h3> <%= @user.email %></h3>
    <p> <%= @user.bio %> </p>
    <h3>Rank: <%= @user.current_rank %></h3>
    <h4>Avg. Score:<%= @user.avarage_score.round(1) %></h4>
     <span><strong>Sports: </strong></span>
        <% @user.sport_list.each do |item| %>
          <span class="label label-default"><%= item %></span>
        <% end %>
        <span><strong>Teams: </strong></span>
        <% @user.favorite_team_list.each do |item| %>
          <span class="label label-danger"><%= item %></span>
        <% end %>
  </div>  


  <div class="row">
    <div class="col-xs-6 col-md-6">
      <div class="row">
        <div class="col-xs-6">

        <% if !user_signed_in? %>
           PLease sign in / sign up to see more details about this user
        <% elsif @teams %>
          <ul>
            <% @teams.each do |team| -%>
              <li>
                <%= image_tag team.image(:thumb)%><br>
                <%= team.notes %>
              </li>
            <% end %>
          </ul>
        <% else %>
          <%= form_tag charges_path do %>
            <%= hidden_field_tag :subcription_user_id, @user.id %>
            <%= hidden_field_tag :price, @user.price %>

            <article>
             <h4>4 lineups</h4>
              <label class="amount">
                <span>Amount: <%= number_to_currency(@user.price.round(2)) %></span>
              </label>
            </article>

            <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                    data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
                    data-description="12h of full access."
                    data-amount="<%= (@user.price.round(2)*100).to_i %>"></script>
          <% end %>

        <% end %>
       
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-md-7 col-md-offset-3 col-sm-6">
     <div class="panel-default">
       <div class="panel panel-heading">
        <h2>Previous Lineups</h2>
         </div>
      
        <% @results.each do |result| -%>

      
          <%= result.score %><br>
          <%= image_tag result.image %><br>
          <%= result.notes %>

       
     
        <% end %>
     
    </div>
  </div>
</div>
</div>
